<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Infusion Lab ‚Äî From Tools to Outcomes</title>
<meta name="description" content="Interactive AI adoption simulator. Infusing CoPilot, OpenAI & M365 into business services for operational excellence and productivity.">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { background: #0b0e17; overflow-x: hidden; }
  #root { min-height: 100vh; }
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useEffect, useRef } = React;


const PASSWORD = "HITL2026";

const VERTICALS = [
  { id: "law", name: "Law Firm", icon: "‚öñÔ∏è", sizes: ["Top 25 Global", "Mid-Tier (100‚Äì500)", "Boutique (<100)"] },
  { id: "finance", name: "Financial Services", icon: "üè¶", sizes: ["Global Bank", "Regional Bank", "Fintech Scaleup"] },
  { id: "insurance", name: "Insurance", icon: "üõ°Ô∏è", sizes: ["Global Carrier", "National Provider", "Specialist Insurer"] },
  { id: "healthcare", name: "Healthcare", icon: "üè•", sizes: ["Hospital Network", "Regional Provider", "Specialist Practice"] },
  { id: "consulting", name: "Consulting", icon: "üìä", sizes: ["Big 4 / MBB", "Mid-Market", "Boutique Firm"] },
  { id: "manufacturing", name: "Manufacturing", icon: "üè≠", sizes: ["Enterprise (10k+)", "Mid-Market (1k‚Äì10k)", "SME (<1k)"] },
];

const AI_PRODUCTS = [
  { id: "copilot", name: "Microsoft Copilot & M365", icon: "üü¶", cost: 15 },
  { id: "openai", name: "OpenAI / ChatGPT Enterprise", icon: "ü§ñ", cost: 12 },
  { id: "docauto", name: "Document Automation AI", icon: "üìÑ", cost: 18 },
  { id: "custom", name: "Custom Internal AI Tools", icon: "üîß", cost: 25 },
  { id: "rpa", name: "RPA & Process Mining", icon: "‚öôÔ∏è", cost: 20 },
  { id: "analytics", name: "AI Analytics & BI", icon: "üìà", cost: 14 },
];

const PHASES = [
  { name: "Foundation", months: "Months 1‚Äì3", key: "foundation", color: "#3b82f6" },
  { name: "Pilot", months: "Months 4‚Äì6", key: "pilot", color: "#8b5cf6" },
  { name: "Scale", months: "Months 7‚Äì9", key: "scale", color: "#f59e0b" },
  { name: "Optimize", months: "Months 10‚Äì12", key: "optimize", color: "#10b981" },
  { name: "Embed", months: "Months 13‚Äì15", key: "embed", color: "#ec4899" },
  { name: "Deliver", months: "Months 16‚Äì18", key: "deliver", color: "#ef4444" },
];

// TOUGHENED SCENARIOS ‚Äî every option has genuine trade-offs, no obvious winner
const SCENARIOS = {
  foundation: [
    { title: "The Mandate Meeting", desc: "The C-suite has given you the transformation mandate. Your first board presentation is in 2 weeks. How do you frame your approach?",
      guide: { rec: "B", analysis: "The phased roadmap builds credibility without over-promising. But in an org that's already digitally mature, A's boldness can catalyse faster. C is intellectually defensible but politically fatal ‚Äî the board hired you to act, not study. The hidden risk: whatever you say becomes the benchmark. Overpromise and 80% delivery reads as failure." },
      options: [
        { text: "Lead with a bold vision ‚Äî 'AI-first operations within 18 months'. Energises the board but sets a binary pass/fail benchmark that could haunt you.", fx: { buyIn: 10, adoption: 3, efficiency: 0, risk: 12, budget: -2 }, fb: "The board is electrified. But three senior partners whisper after the meeting: 'That's a career-ending promise if it doesn't land.' You now carry that weight." },
        { text: "Present a phased roadmap with quick wins in months 1‚Äì3. Pragmatic and credible, but risks being perceived as 'safe' and unambitious.", fx: { buyIn: 8, adoption: 5, efficiency: 3, risk: -3, budget: -2 }, fb: "Strong reception. Two board members nod approvingly. But the CEO pulls you aside: 'I wanted to see more fire. Our competitors aren't phasing ‚Äî they're sprinting.'" },
        { text: "Commission a 6-week discovery audit. Thorough, evidence-based, but burns early political capital and delays all momentum.", fx: { buyIn: -5, adoption: 0, efficiency: 0, risk: -12, budget: -4 }, fb: "Thorough, but the COO is visibly frustrated: 'We hired you to transform, not study. Six weeks of your time costs us a quarter of momentum.' The data you gather will be valuable ‚Äî if anyone still trusts the timeline." },
      ]},
    { title: "Stakeholder Resistance", desc: "A powerful department head with 20 years' tenure openly questions AI at an all-hands: 'We've seen these tech fads before. This will be forgotten in a year.' The room is watching how you respond.",
      guide: { rec: "A", analysis: "Co-leadership invitation is simultaneously generous and strategic ‚Äî it reframes the dynamic from 'you vs. me' to 'us.' But their resistance is almost always a proxy for fear of irrelevance. If they're genuinely toxic (not just sceptical), escalation becomes necessary later. The data approach (B) wins the argument but loses the person." },
      options: [
        { text: "Acknowledge their concern publicly and invite them to co-lead a pilot. Generous but hands them potential veto power over early results.", fx: { buyIn: 8, adoption: 2, efficiency: 0, risk: 2, budget: 0 }, fb: "They accept, cautiously. But co-leadership means co-ownership ‚Äî they slow the pilot timeline by 3 weeks insisting on additional safeguards. Other departments see both the inclusion and the delay." },
        { text: "Present competitor data showing AI adoption rates. Rational and evidence-based, but reframes the conversation as confrontational.", fx: { buyIn: 4, adoption: 4, efficiency: 2, risk: 4, budget: 0 }, fb: "The data is irrefutable, and the room shifts. But the department head feels publicly humiliated. They go quiet ‚Äî not convinced, just silenced. Three months later, their team's adoption rate is the lowest in the firm." },
        { text: "Deflect gracefully ‚Äî 'Great challenge, let's discuss offline' ‚Äî and move on. Avoids conflict but doesn't resolve anything.", fx: { buyIn: 2, adoption: 0, efficiency: 0, risk: -2, budget: 0 }, fb: "Smooth in the moment. But the department head tells their team afterwards: 'See? No real answer.' The narrative that AI is a fad quietly takes root in their department of 80 people." },
      ]},
    { title: "Budget Allocation", desc: "Finance approved ¬£2.4M for Year 1. The CFO expects 'tangible technology' spend. Your CHRO advocates for people investment. Both are watching your allocation.",
      guide: { rec: "B", analysis: "The 40/35/25 split treats AI transformation as a people programme with a technology component. This is the DNA decision ‚Äî almost impossible to reallocate once committed. The hidden risk: vendors deliver demos, but employees deliver adoption. Under-investing in change management is the #1 predictor of failed transformations." },
      options: [
        { text: "70% technology licensing, 20% training, 10% change management. The CFO's preference ‚Äî heavy on 'tangible' investment that's easy to track.", fx: { buyIn: 3, adoption: 8, efficiency: 6, risk: 6, budget: -7 }, fb: "Tools deployed fast. Licences activated across the firm. But by month 4, only 23% of staff have logged in more than once. The CFO is happy with procurement metrics; the reality on the ground tells a different story." },
        { text: "40% technology, 35% training & upskilling, 25% change management. Balanced, but the CFO questions why ¬£600K is going to 'soft' change work.", fx: { buyIn: 5, adoption: 5, efficiency: 3, risk: -3, budget: -6 }, fb: "The CFO pushes back: 'What exactly does ¬£600K of change management buy us?' You spend an hour defending the allocation. But three months in, your adoption curves are the healthiest in the industry." },
        { text: "30% tech, 20% training, 50% hiring AI specialists. Build an elite internal team, but create a two-tier organisation.", fx: { buyIn: -2, adoption: 3, efficiency: 5, risk: 5, budget: -10 }, fb: "You hire brilliantly ‚Äî 6 specialists who could work at Google. But existing staff feel bypassed. 'They spent ¬£1.2M on new people instead of investing in us.' The talent is exceptional; the cultural fracture is real." },
      ]},
    { title: "Data Governance Crisis", desc: "Your DPO and compliance team raise urgent concerns: client data cannot be processed by external AI services. They want a full governance framework before any pilots launch. Your pilot teams are ready to go.",
      guide: { rec: "B", analysis: "Deploy on internal data while building governance in parallel. There's enormous non-client value to unlock (HR, finance, operations, knowledge management) that faces zero regulatory barriers. The hidden risk: governance frameworks built in isolation from real use cases are always either too restrictive or too permissive." },
      options: [
        { text: "Pause all pilots until governance is complete. Legally bulletproof but kills 3 months of momentum and signals that compliance has veto power.", fx: { buyIn: -6, adoption: -6, efficiency: 0, risk: -14, budget: -3 }, fb: "The governance framework is excellent ‚Äî genuinely industry-leading. But it took 14 weeks. Two pilot teams disbanded. Your CEO's enthusiasm has cooled to 'cautious interest.' You've traded speed for safety, and both have costs." },
        { text: "Deploy AI on non-sensitive internal data first (HR, ops, knowledge). Build governance in parallel for client-facing work.", fx: { buyIn: 3, adoption: 6, efficiency: 4, risk: -2, budget: -2 }, fb: "Smart move, but not without friction. The DPO is nervous: 'Internal data today, client data tomorrow ‚Äî where's the line?' Meanwhile, teams see real value on internal processes. The governance team, seeing real use cases, builds a better framework." },
        { text: "Push ahead with anonymised/synthetic data for client-facing pilots too. Move fast and refine governance based on actual usage.", fx: { buyIn: 1, adoption: 10, efficiency: 8, risk: 14, budget: -1 }, fb: "Fast and impressive results. But in month 3, a junior associate accidentally processes real client data through the AI tool. No breach occurs, but the near-miss makes national legal press. Your DPO says 'I warned you.'" },
      ]},
  ],
  pilot: [
    { title: "Pilot Selection Dilemma", desc: "Three departments want the pilot. Litigation (enthusiastic, small team of 30), Corporate Finance (skeptical, 200 people, massive efficiency gap), and Operations (neutral, 150 people, strong data infrastructure).",
      guide: { rec: "A (conditional)", analysis: "The pilot isn't a technology test ‚Äî you know the tools work. It's a political test: can you generate a success story that the organisation believes? Choose the enthusiastic team, but only if they're in a function the rest of the org respects. If they're marginal, their success won't convince anyone." },
      options: [
        { text: "Litigation ‚Äî they're eager and will champion success. But they're small, and Corporate Finance will dismiss their results as 'not relevant to real work.'", fx: { buyIn: 7, adoption: 8, efficiency: 4, risk: -2, budget: -3 }, fb: "Litigation delivers a brilliant showcase ‚Äî 45% time saved on document review. But as predicted, Corporate Finance says: 'That's 30 people doing simple tasks. Call us when it works on complex financial models.'" },
        { text: "Corporate Finance ‚Äî biggest impact potential, but they're resistant. If it fails here, the failure is loud and public.", fx: { buyIn: 2, adoption: 4, efficiency: 10, risk: 8, budget: -5 }, fb: "Hard-fought 30% efficiency gains, but the journey was brutal. Three senior analysts refused to participate. The department head grudgingly admits results 'are interesting.' Not a ringing endorsement, but the numbers speak." },
        { text: "Operations ‚Äî neutral ground, good data, lower stakes. Safe bet, but 'safe' doesn't generate transformation momentum.", fx: { buyIn: 4, adoption: 5, efficiency: 6, risk: -4, budget: -3 }, fb: "Smooth rollout, solid results, zero drama. Operations hums along 25% more efficiently. But nobody's excited. The board asks: 'This is fine, but is this transformation or just...optimisation?'" },
      ]},
    { title: "The Vendor Pitch Storm", desc: "Five vendors are competing. Microsoft (proven M365 integration, premium cost, 18-month lock-in), an AI startup (superior technology, 4 months old, no enterprise references), and your existing IT partner (convenient, limited AI capability). Your CTO and CFO disagree.",
      guide: { rec: "C (hybrid)", analysis: "The strategically correct answer: market leader as your core platform with startup for innovation edge cases. But multi-vendor is the hardest to execute ‚Äî requires vendor management capacity you may not have. The hidden risk isn't lock-in, it's vendor sprawl." },
      options: [
        { text: "Microsoft ‚Äî proven, integrated with your stack. But the 18-month lock-in means you can't pivot if better solutions emerge, and the cost is 40% above alternatives.", fx: { buyIn: 5, adoption: 5, efficiency: 4, risk: -6, budget: -8 }, fb: "Rock-solid implementation. No surprises. But 6 months in, a competitor deploys a specialist AI tool that outperforms Copilot on your core workflows by 3x. You're locked in. The CTO sighs." },
        { text: "The startup ‚Äî genuinely superior tech, but they've never deployed at enterprise scale. If they fail or fold, you're starting over.", fx: { buyIn: 1, adoption: 7, efficiency: 9, risk: 12, budget: -4 }, fb: "The tech is extraordinary ‚Äî capabilities Microsoft won't have for 18 months. But integration takes 6 weeks instead of 2, their support team is 3 people, and your IT team is working weekends. High ceiling, no floor." },
        { text: "Multi-vendor: Microsoft as core, startup for innovation use cases. Maximum flexibility but doubles your integration complexity and vendor management overhead.", fx: { buyIn: 3, adoption: 6, efficiency: 6, risk: 4, budget: -7 }, fb: "Best of both worlds in theory. In practice, your team spends 30% of their time managing vendor relationships, debugging integrations, and reconciling conflicting update cycles. The capability is there; the operational cost is real." },
      ]},
    { title: "The Quick Win", desc: "Your pilot data shows AI could save 12,000 hours/year on meeting scheduling and email drafting alone. The CEO wants to announce it at the all-hands next week. Your HR director warns: 'In the current climate, efficiency = headcount reduction in people's minds.'",
      guide: { rec: "C", analysis: "The reframing as 'hours redirected to higher-value work' is the only narrative that doesn't trigger existential fear. But the framing you choose now becomes the template for how the org understands AI value permanently. If you start with hours saved, you can never fully pivot to hours redirected." },
      options: [
        { text: "Announce it as 'AI saves 12,000 hours' ‚Äî the headline the CEO wants. But your HR director's warning about headcount anxiety is probably right.", fx: { buyIn: 4, adoption: 6, efficiency: 5, risk: 8, budget: 0 }, fb: "Standing ovation from the CEO. But within 48 hours, three Slack channels are buzzing with 'does 12,000 hours saved mean 6 jobs lost?' Your HR inbox fills with anxious queries. The number landed; the narrative backfired." },
        { text: "Share quietly with leadership only. Let adoption speak for itself. But you're wasting your best proof point when you need political capital most.", fx: { buyIn: 6, adoption: 3, efficiency: 4, risk: -4, budget: 0 }, fb: "Leadership is impressed. But the broader organisation has no idea the pilot worked. Adoption requests don't spike because nobody knows there's something to adopt. You have credibility with 12 people instead of 1,200." },
        { text: "Reframe as '12,000 hours redirected to higher-value work.' Positive framing, but sophisticated staff may see through it ‚Äî are hours really being redirected, or just eliminated?", fx: { buyIn: 8, adoption: 7, efficiency: 5, risk: 2, budget: 0 }, fb: "The framing lands well with most staff. But a senior analyst posts internally: 'Redirected where, exactly? Has anyone actually been given new work to fill those hours?' A fair question you'll need to answer with specifics." },
      ]},
    { title: "Training Approach", desc: "Your pilot teams need training. You have 200 people across 3 departments. The billable-hour culture means every hour in training is an hour not billed to clients. Partners are watching the utilisation numbers.",
      guide: { rec: "B", analysis: "The AI Champions programme is the proven model ‚Äî invest deeply in 10-15% who are naturally inclined, then they pull the rest. But the hidden risk is champion dependency: if your champions burn out or leave, the support structure collapses. Always build redundancy." },
      options: [
        { text: "Mandatory 2-day intensive for all 200 people. Thorough and equitable, but 400 billable hours lost. The Managing Partner will call you.", fx: { buyIn: -4, adoption: 7, efficiency: 5, risk: -4, budget: -5 }, fb: "Comprehensive training ‚Äî everyone has baseline competency. But the Managing Partner calls: 'That's ¬£320K in lost billable time. I need you to justify that to the partnership.' The investment will pay off, but the political cost is immediate." },
        { text: "AI Champions programme ‚Äî train 25 power users who mentor their peers. Organic and scalable, but creates dependency on those 25 people.", fx: { buyIn: 6, adoption: 7, efficiency: 5, risk: 0, budget: -2 }, fb: "Champions are brilliant ‚Äî adoption spreads peer-to-peer. But 4 months in, 3 champions are promoted, 2 are burnt out from the mentoring load on top of their day jobs, and the remaining 20 are stretched. The model works until it doesn't." },
        { text: "Self-paced modules with optional clinics. Minimal disruption to billable work, but completion rates for self-paced corporate learning average 22%.", fx: { buyIn: 2, adoption: 3, efficiency: 2, risk: 3, budget: -1 }, fb: "The keen 20% complete everything and become proficient. The other 80% 'haven't had time.' Six months later, there's a hard skill gap between the self-starters and everyone else. Low cost, low ceiling." },
      ]},
  ],
  scale: [
    { title: "Scaling Decision", desc: "Pilot showed 40% efficiency gains. The CEO wants immediate company-wide rollout. Your data shows the gains came partly from hand-picked enthusiasts with dedicated support ‚Äî conditions you can't replicate at scale.",
      guide: { rec: "B", analysis: "Staged rollout is the answer, but framing matters: present it to the CEO not as 'slowing down' but as 'scaling smart.' The 40% was partly Hawthorne effect ‚Äî people perform better when watched. Real-world scaling typically delivers 60% of pilot gains." },
      options: [
        { text: "Agree ‚Äî scale immediately. The CEO's support is your most valuable asset. Saying no risks losing it. But you know the 40% won't hold.", fx: { buyIn: 6, adoption: 12, efficiency: 5, risk: 14, budget: -8 }, fb: "Adoption numbers soar on paper. But efficiency gains at scale are 18%, not 40%. Support tickets triple. Two departments openly revolt: 'This tool was forced on us without training.' The CEO is confused ‚Äî 'didn't the pilot work?'" },
        { text: "Propose staged rollout ‚Äî 3 departments per month. Controlled, but the CEO may read it as you lacking confidence in your own results.", fx: { buyIn: 4, adoption: 7, efficiency: 7, risk: -4, budget: -5 }, fb: "The CEO frowns: 'Our competitors aren't staging.' But you hold firm. By month 3 of rollout, each wave is smoother than the last. Efficiency averages 32% ‚Äî lower than pilot but real and sustainable. The CEO comes around." },
        { text: "Push back ‚Äî need 2 more months of pilot data. Analytically defensible but the CEO just told you to scale and you're saying 'wait.'", fx: { buyIn: -8, adoption: 1, efficiency: 1, risk: -8, budget: -2 }, fb: "The CEO's enthusiasm cools visibly. 'I thought we proved this works.' Two months of additional data confirms what you already knew. You've lost political capital for statistical significance nobody asked for." },
      ]},
    { title: "The AI Hallucination Incident", desc: "A contract drafted by AI contains 3 fabricated case citations. The client's in-house counsel caught them. Your managing partner is furious. The press haven't picked it up yet. You have 24 hours to respond.",
      guide: { rec: "A then C", analysis: "This is the transformation's defining moment. Not the pilot success, not the efficiency numbers. This. How you handle the first visible AI failure determines whether the organisation trusts AI with progressively higher-stakes work or retreats permanently. Be transparent immediately, then evolve into a 'Responsible AI' initiative." },
      options: [
        { text: "Full transparency ‚Äî notify the client formally, brief all partners, publish an internal incident review, and mandate human review checkpoints.", fx: { buyIn: 3, adoption: -6, efficiency: -4, risk: -10, budget: -4 }, fb: "Painful week. Three partners demand the AI programme be paused. The client appreciates the honesty but questions your quality controls. Adoption drops 15%. But your guardrails become industry-referenced, and the trust recovery is real." },
        { text: "Contain it ‚Äî fix the document, apologise to the client informally, add review checkpoints quietly. Don't broadcast the failure internally.", fx: { buyIn: -2, adoption: 1, efficiency: -1, risk: -2, budget: -1 }, fb: "Clean containment. The client accepts the fix gracefully. But 6 weeks later, a junior associate mentions the incident at a team meeting. Word spreads. Now the question isn't just about AI quality ‚Äî it's about transparency. 'What else has been hidden?'" },
        { text: "Turn it into a 'Responsible AI' initiative ‚Äî disclose the incident but frame it as the catalyst for an industry-leading governance programme.", fx: { buyIn: 5, adoption: -3, efficiency: -1, risk: -8, budget: -5 }, fb: "Masterful reframing ‚Äî but some partners see through it: 'You're turning a quality failure into a PR opportunity.' The initiative is genuinely valuable, though, and the framework you build prevents a dozen future incidents." },
      ]},
    { title: "Integration Headache", desc: "Your AI tools aren't talking to your legacy practice management system (15 years old, 200 custom integrations). IT says full replacement: ¬£1.8M, 14 months. Lightweight API bridges: ¬£400K, 3 months. Or manual workarounds that staff increasingly hate.",
      guide: { rec: "B", analysis: "API bridges for critical workflows. Full integration is an embed-phase or post-transformation project ‚Äî don't fight a two-front war. But the hidden risk: every API bridge is technical debt you'll eventually maintain or replace." },
      options: [
        { text: "Full integration ‚Äî ¬£1.8M, 14 months. Foundational but consumes your remaining budget and extends beyond your 18-month mandate.", fx: { buyIn: 1, adoption: 2, efficiency: 8, risk: -6, budget: -14 }, fb: "The board approves the investment but your transformation budget is gutted. You can't fund any new initiatives for 8 months. When integration finally completes in month 16, it's transformative ‚Äî but you spent most of your mandate waiting for infrastructure." },
        { text: "Lightweight API bridges ‚Äî ¬£400K, critical workflows only. Pragmatic, but edge cases still require manual work and staff frustration persists.", fx: { buyIn: 4, adoption: 6, efficiency: 6, risk: 3, budget: -5 }, fb: "Core workflows hum. But the 30% of tasks that aren't covered by bridges become daily friction points. 'It works great for the basics but I still have to copy-paste between three systems for anything complex.' Technical debt accumulates quietly." },
        { text: "Accept workarounds ‚Äî save the budget for people and adoption. Staff are frustrated but functional, and the legacy system is on a 2-year replacement timeline anyway.", fx: { buyIn: -4, adoption: -3, efficiency: -3, risk: 4, budget: 2 }, fb: "Budget preserved. But staff frustration compounds weekly. 'This AI was supposed to save time ‚Äî now I'm doing more manual steps than before.' Two team leads write a joint email to the COO questioning the programme's credibility." },
      ]},
    { title: "Talent War", desc: "Your Head of AI Implementation ‚Äî the person who architected your pilot success ‚Äî has a confirmed offer from a competitor at ¬£180K (40% raise). Two of her team are also being courted. She hasn't accepted yet but wants an answer by Friday.",
      guide: { rec: "B", analysis: "Promotion + equity + title outperforms pure cash because it offers currency beyond money: status, scope, career trajectory. But if your transformation is dependent on one person, you have a structural vulnerability. The signal of their departure matters more than the individual loss." },
      options: [
        { text: "Match the salary and create retention packages for the whole AI team. Keeps everyone, but ¬£180K sets a precedent that HR will cite for years.", fx: { buyIn: 3, adoption: 4, efficiency: 3, risk: -4, budget: -9 }, fb: "Team intact. But three weeks later, a non-AI senior manager asks: 'I heard the AI team got 40% raises. When is that happening for the rest of us?' HR is fielding comparability complaints. You've won a battle and started a war." },
        { text: "Counter with 'Head of AI Innovation' title, 15% raise, equity, and a direct reporting line to the CTO. Less money, but a career-making role.", fx: { buyIn: 6, adoption: 5, efficiency: 4, risk: -1, budget: -4 }, fb: "She takes it ‚Äî the title and trajectory matter more than the cash. But she's now a C-suite adjacent leader with expectations to match. If the next 6 months don't deliver visible impact, the elevated role amplifies the pressure on both of you." },
        { text: "Let her go. Promote her deputy, use the salary savings to hire two mid-level specialists. Painful, but no one should be irreplaceable.", fx: { buyIn: -4, adoption: -5, efficiency: -3, risk: 7, budget: 2 }, fb: "She leaves. The deputy is capable but takes 3 months to fill the leadership gap. Two pilot teams lose momentum. But you've proven the programme isn't built on one person ‚Äî and the two new hires bring fresh perspectives the team needed." },
      ]},
  ],
  optimize: [
    { title: "The ROI Reckoning", desc: "Month 12. The CFO wants hard ROI numbers for the board. Your data: 35% efficiency gain in adopted departments (covering 55% of staff), but 3 departments are below 15% adoption. Total programme spend: ¬£2.1M. You can present this multiple ways.",
      guide: { rec: "B", analysis: "The full picture with course correction. Structure as: (1) impact delivered, (2) where we're falling short and why, (3) what we're doing about it. The ROI reckoning isn't about numbers ‚Äî it's about trust. The CFO is evaluating whether you're a credible steward." },
      options: [
        { text: "Lead with the wins: '35% efficiency across adopted departments, projected ¬£3.2M annual value.' Technically true but cherry-picks the best cohort.", fx: { buyIn: 6, adoption: 2, efficiency: 2, risk: 6, budget: 2 }, fb: "The board is impressed ‚Äî initially. Then a non-exec director asks: 'What's adoption across the whole firm?' Your 55% figure is less compelling. The CFO notes the gap between your headline and the full picture. Trust takes a quiet hit." },
        { text: "Present the full picture: wins, gaps, and a funded course-correction plan. Honest but risks the board seeing a 'mixed result' rather than a success.", fx: { buyIn: 8, adoption: 4, efficiency: 4, risk: -4, budget: -1 }, fb: "The board appreciates the candour. 'Finally, someone who doesn't just give us the good news.' They approve your correction plan and add ¬£200K. But the headline in the board minutes reads 'Mixed results ‚Äî correction plan approved.' Not the legacy you wanted." },
        { text: "Reframe entirely: present a maturity model showing you're 'on track' against a 3-year transformation arc. The 18-month scope was always Phase 1.", fx: { buyIn: 4, adoption: 2, efficiency: 2, risk: 3, budget: 0 }, fb: "The strategic reframe works with some board members but the CFO is unimpressed: 'We funded an 18-month programme, not Phase 1 of a 3-year journey. That's scope creep.' You've bought time but shifted the goal posts ‚Äî and everyone noticed." },
      ]},
    { title: "Culture Clash", desc: "Clear generational divide. Junior associates (under 5 years) are 3x more productive with AI tools. Senior partners (20+ years) are avoiding them entirely and their output quality is visibly declining. Two senior partners have threatened to leave if AI is 'forced on them.'",
      guide: { rec: "A", analysis: "Reverse-mentoring respects both groups. Seniors aren't resistant because they're stupid ‚Äî they're resistant because AI threatens a 25-year identity built on expertise that AI now partially replicates. The hidden risk: mandating AI as a performance metric gets compliance, not conviction ‚Äî and you lose your best senior people." },
      options: [
        { text: "Reverse-mentoring pairs ‚Äî juniors teach AI, seniors share domain expertise. Elegant, but assumes senior partners will accept being taught by people they supervise.", fx: { buyIn: 7, adoption: 6, efficiency: 4, risk: -2, budget: -1 }, fb: "Works beautifully in 60% of pairings. The other 40%? Awkward. Two senior partners feel 'patronised' and one formally complains: 'I'm being asked to learn from someone I trained.' The successful pairs generate real breakthroughs; the failed ones create new tensions." },
        { text: "Make AI proficiency a performance metric for all staff. Forces adoption but treats a cultural problem as a compliance problem.", fx: { buyIn: -6, adoption: 10, efficiency: 7, risk: 6, budget: 0 }, fb: "Adoption numbers spike to 78% within 8 weeks. But it's surface-level ‚Äî people log in, click around, then do things the old way. Two senior partners resign, taking ¬£4.2M in client relationships. The metric is met; the cost is steep." },
        { text: "Create parallel tracks ‚Äî AI-augmented and traditional workflows coexist. Pragmatic and respectful, but institutionalises a two-tier system.", fx: { buyIn: 3, adoption: 2, efficiency: 1, risk: 4, budget: -2 }, fb: "Peace in the short term. But within 6 months, clients start noticing: 'The team using AI delivered in 3 days; the traditional team took 2 weeks.' The two-tier system creates two-tier client experiences, and the gap becomes unsustainable." },
      ]},
    { title: "Regulatory Shockwave", desc: "The EU AI Act's new provisions require full audit trails for all AI-assisted professional services decisions. Enforcement begins in 9 months. Your current tools have no audit capability. Your competitors are in the same position ‚Äî but the first mover who is compliant gets a market advantage.",
      guide: { rec: "B+C parallel", analysis: "Risk-tiered audit logging: critical workflows immediately, others before deadline. Lobby in parallel but never instead of action. The hidden risk: most orgs discover during this process that they don't actually know all the places AI is being used." },
      options: [
        { text: "Pause AI in all regulated workflows immediately. Retrofit audit capabilities. Compliant but operationally devastating ‚Äî 60% of your efficiency gains evaporate overnight.", fx: { buyIn: -5, adoption: -8, efficiency: -6, risk: -14, budget: -6 }, fb: "Compliant 7 months ahead of deadline. Your competitors are panicking. But internally, 'the pause' becomes legendary ‚Äî staff who were just getting comfortable with AI are now told to stop using it. Rebuilding that trust takes months." },
        { text: "Implement audit logging on the 5 highest-risk workflows now. Address the rest in waves before the deadline. Pragmatic but you're carrying compliance risk on the un-audited workflows.", fx: { buyIn: 4, adoption: -2, efficiency: -2, risk: -7, budget: -4 }, fb: "Smart prioritisation. The 5 critical workflows are audit-ready in 6 weeks. But during the gap period, a client asks: 'Is everything you do for us fully auditable?' The honest answer is 'not yet.' You manage the conversation, but it's uncomfortable." },
        { text: "Lobby the industry body for phased enforcement while building audit capabilities. Industry-aligned approach, but lobbying outcomes are uncertain and you might end up with neither compliance nor delay.", fx: { buyIn: 2, adoption: 0, efficiency: 0, risk: 3, budget: -3 }, fb: "The lobbying coalition succeeds ‚Äî enforcement delayed by 6 months. But you've spent 3 months lobbying instead of building. Some firms who just built audit capabilities are now 3 months ahead of you. The delay helped everyone, including your competitors." },
      ]},
  ],
  embed: [
    { title: "The Competitor Leapfrog", desc: "Your biggest competitor issues a press release: '80% AI adoption, AI-native service delivery, 50% faster turnaround.' Your board calls an emergency meeting. Your own adoption is at 62%. The press is comparing you unfavourably.",
      guide: { rec: "A+C", analysis: "Stay the course with responsible-AI differentiation. Competitive announcements are almost never what they seem ‚Äî '80% adoption' typically means 80% have access, not 80% are proficient. The panic response (accelerating) destroys more transformations than any single decision." },
      options: [
        { text: "Stay the course. Trust your process. But 'trust the process' is cold comfort when the Financial Times is writing about your competitor's innovation.", fx: { buyIn: -4, adoption: 2, efficiency: 3, risk: -5, budget: 0 }, fb: "Six months later, your competitor's rushed rollout leads to a public quality incident. Your steadiness looks prescient ‚Äî in retrospect. But the 6 months of board anxiety, client questions, and recruitment disadvantage were very real costs." },
        { text: "Accelerate ‚Äî compress your remaining 6-month plan into 3 months. The board will support aggressive spending. But your team is already at capacity.", fx: { buyIn: 5, adoption: 8, efficiency: 3, risk: 12, budget: -6 }, fb: "Adoption jumps to 74%. But quality control slips ‚Äî two client deliverables have errors. Your best programme manager quits, citing burnout. You've closed the adoption gap but opened a quality gap and a people gap." },
        { text: "Differentiate ‚Äî position your 'responsible AI' approach as the premium choice. Clients want quality, not speed. But 'responsible' can sound like 'slow' to prospects.", fx: { buyIn: 6, adoption: 4, efficiency: 2, risk: -6, budget: -3 }, fb: "Your BD team reports: 3 new client conversations opened with 'we heard you do AI responsibly.' But 2 existing clients moved RFPs to your competitor 'to test their AI capabilities.' The differentiation wins some and loses some." },
      ]},
    { title: "Shadow AI Problem", desc: "An internal audit reveals 40% of staff are using personal ChatGPT accounts for work ‚Äî drafting client emails, summarising documents, even generating first drafts of contracts. Your DPO is alarmed. But the usage data shows these people are your most productive employees.",
      guide: { rec: "B‚ÜíC‚ÜíA sequence", analysis: "Shadow AI is the single best diagnostic of your transformation's health. If people are bypassing approved tools, it means your approved tools are failing them. Understand the use cases first, then build a governed sandbox, then enforce. Blocking first is the compliance instinct ‚Äî and the wrong one." },
      options: [
        { text: "Block all unauthorised AI tools immediately. Data governance is non-negotiable. But you're punishing your most productive people for working around tools that don't meet their needs.", fx: { buyIn: -8, adoption: -6, efficiency: -4, risk: -10, budget: -2 }, fb: "Secure. Compliant. And deeply unpopular. Productivity in the affected group drops 30% overnight. Three high performers ‚Äî the kind you can't afford to lose ‚Äî update their LinkedIn profiles within a week. You've protected data and alienated talent." },
        { text: "Investigate first ‚Äî learn what they're using it for, which gaps your approved tools have, and integrate the missing capabilities. But every day you investigate is a day client data is at risk.", fx: { buyIn: 7, adoption: 8, efficiency: 6, risk: 6, budget: -3 }, fb: "Fascinating findings: 70% of shadow usage fills gaps your approved tools genuinely don't cover. You fast-track 3 new capabilities. But during the 4-week investigation, a client email drafted in ChatGPT accidentally includes another client's name. Small incident, big implications." },
        { text: "Launch an 'AI Sandbox' ‚Äî a governed, approved environment that gives staff the flexibility they want within safe boundaries. But building it takes 6 weeks, and the shadow usage continues in the meantime.", fx: { buyIn: 5, adoption: 6, efficiency: 4, risk: -4, budget: -5 }, fb: "The sandbox launches to genuine enthusiasm ‚Äî it's the most-used internal tool within 2 weeks. But the 6-week build period was 6 weeks of continued risk. And 15% of staff find the sandbox 'too restrictive' and quietly continue using personal accounts." },
      ]},
    { title: "Governance Model", desc: "AI is now embedded in 14 departments. You need formal governance. The CTO wants centralised control ('one throat to choke'). Department heads want autonomy ('we know our workflows'). Both have legitimate points.",
      guide: { rec: "B", analysis: "Federated model with clear operating principles. The coordination council owns standards, vendor relationships, and data governance. Departments own use-case innovation and local adoption. The hidden risk: governance that's too rigid strangles innovation; too loose allows the shadow AI problem to return." },
      options: [
        { text: "Centralised AI Centre of Excellence under the CTO. Clear accountability, consistent standards. But every new AI use case now requires central approval ‚Äî innovation bottleneck.", fx: { buyIn: 2, adoption: 2, efficiency: 5, risk: -9, budget: -5 }, fb: "Standards are excellent. Quality control is tight. But the approval queue grows to 6 weeks. Department heads start complaining: 'We had an idea on Monday and can't test it until March.' The bottleneck becomes the #1 complaint in the employee survey." },
        { text: "Federated model ‚Äî AI leads per department with a quarterly coordination council. Empowers departments but coordination overhead is real and standards may drift.", fx: { buyIn: 7, adoption: 7, efficiency: 5, risk: -2, budget: -3 }, fb: "Departments innovate at speed ‚Äî 8 new use cases in the first quarter. But by the second quarter, three departments have built overlapping tools, and data governance standards have 'local variations' that worry the DPO. Coordination is harder than it looks." },
        { text: "Minimal governance ‚Äî publish broad principles, trust teams, intervene only when needed. Maximum agility, but 'intervene when needed' means you're always reactive.", fx: { buyIn: 4, adoption: 9, efficiency: 7, risk: 10, budget: 0 }, fb: "Innovation explodes. 15 new use cases in 6 weeks. But one department deploys an AI tool that processes sensitive data without proper controls. The incident forces you to implement emergency governance ‚Äî the exact centralised control you were trying to avoid, now done in crisis mode." },
      ]},
  ],
  deliver: [
    { title: "The Final Push", desc: "Month 16. Firm-wide adoption is 64%. But Legal (42 people) and Compliance (38 people) are at 18% and 22% respectively. These departments work with the most sensitive data and their resistance has legitimate governance reasons. 3 months to your deadline.",
      guide: { rec: "A+nuance", analysis: "Embedded coaches diagnose specific barriers ‚Äî the reason departments are below 30% at month 16 is almost never 'they haven't been trained.' It's leadership resistance, genuine workflow mismatch, or unresolved governance concerns. The coach's job is diagnosis, not just training." },
      options: [
        { text: "Intensive support blitz ‚Äî embed AI coaches in both departments for 12 weeks. Expensive, but personalised attention is the only thing that moves resistant teams.", fx: { buyIn: 4, adoption: 10, efficiency: 4, risk: 2, budget: -6 }, fb: "The coaches discover the real blockers: Legal's concern is genuinely about AI accuracy in litigation (fair point), Compliance worries about audit trails (also fair). Adoption reaches 48% ‚Äî not stellar, but the coaches uncover issues that benefit the whole firm." },
        { text: "Redefine success ‚Äî report on the 64% who adopted, acknowledge the holdouts as 'Phase 2.' Politically smart but intellectually dishonest.", fx: { buyIn: -3, adoption: 1, efficiency: 1, risk: 5, budget: 0 }, fb: "The board presentation looks good. But the Legal and Compliance teams now feel officially deprioritised. Their resistance hardens: 'Even leadership doesn't think this matters for us.' And when the next transformation initiative arrives, they remember being written off." },
        { text: "Make AI proficiency part of the next performance review for all departments. Structural pressure that signals permanence ‚Äî but forces adoption in sensitive areas where the governance concerns are legitimate.", fx: { buyIn: -4, adoption: 7, efficiency: 4, risk: 8, budget: 0 }, fb: "Legal's head of department calls you directly: 'You're asking my team to use AI tools for litigation work that doesn't have adequate quality controls. If something goes wrong, it's my professional liability.' They have a point. The metric creates adoption but not safety." },
      ]},
    { title: "Succession Planning", desc: "The board asks: 'Your role was an 18-month mandate. What happens to the AI transformation when you leave?' Your three options represent fundamentally different philosophies about how change endures.",
      guide: { rec: "Layered: A‚ÜíC‚ÜíB", analysis: "A (permanent CAIO) for the next 12-24 months to protect the transformation, C (community of practice) to build grassroots resilience, with the long-term target of B (distributed leadership). The best leaders design for a world where no successor is needed." },
      options: [
        { text: "Propose a permanent Chief AI Officer role. Signals long-term commitment, but C-suite roles can become bureaucratic and the CAIO may not share your vision.", fx: { buyIn: 8, adoption: 4, efficiency: 4, risk: -8, budget: -4 }, fb: "The board agrees. But the recruitment process takes 4 months, during which AI decisions stall: 'Let's wait for the new CAIO.' When they arrive, they have different priorities. The continuity you designed for becomes a controlled discontinuity." },
        { text: "Distribute AI leadership across existing department heads. Makes AI 'everyone's job' ‚Äî the ultimate end state. But if you distribute too early, it becomes no one's job.", fx: { buyIn: 4, adoption: 2, efficiency: 2, risk: 5, budget: 0 }, fb: "In theory, AI is now embedded in every leadership role. In practice, it drops to item #7 on every department head's priority list. Without a dedicated champion, the AI budget gets quietly reallocated. In 12 months, adoption plateaus and starts to decline." },
        { text: "Build a self-sustaining community of practice. Grassroots, resilient, doesn't depend on any single role. But communities need energy to survive ‚Äî without a mandate, they can fade.", fx: { buyIn: 6, adoption: 6, efficiency: 4, risk: 0, budget: -1 }, fb: "The community launches with 85 members and genuine enthusiasm. Six months after you leave, it's down to 40 active members. The core 40 are deeply committed and continue innovating ‚Äî but the broader organisation starts drifting back to old habits." },
      ]},
    { title: "The Board Presentation", desc: "Final presentation. 18 months of work. The room contains the CEO, CFO, COO, Managing Partner, and three non-executive directors. The CEO wants vision. The CFO wants numbers. The Managing Partner wants to know the people impact. You can only lead with one narrative.",
      guide: { rec: "Lead C ‚Üí support B ‚Üí close A", analysis: "The human narrative first: 'our people transformed, and the technology followed.' Support with hard numbers for the CFO. Close with forward vision. The final presentation isn't about the past 18 months ‚Äî it's about whether the board funds the next 18." },
      options: [
        { text: "'We built a foundation for the next decade of competitive advantage.' Visionary and forward-looking. Appeals to the CEO. But the CFO will ask: 'What did the last decade of investment actually deliver?'", fx: { buyIn: 7, adoption: 3, efficiency: 2, risk: -3, budget: 0 }, fb: "The CEO beams. The non-execs nod. Then the CFO: 'Lovely vision. What's the ROI on the ¬£2.4M we spent?' You pivot to numbers, but leading with vision and following with data feels like you're backfilling justification. The CFO is 60% convinced." },
        { text: "'The numbers: 64% adoption, 32% efficiency gain, ¬£1.8M projected annual savings, 94% staff satisfaction with AI tools.' Hard data that speaks for itself. But numbers without narrative feel transactional.", fx: { buyIn: 5, adoption: 5, efficiency: 7, risk: -2, budget: 3 }, fb: "The CFO is delighted. The Managing Partner writes down the numbers. But the CEO looks... underwhelmed: 'These are good numbers. But where's the story? Where's the transformation?' Data proved the investment; it didn't inspire the next one." },
        { text: "'Our people transformed, and the technology followed.' The human story ‚Äî cultural change, capability building, organisational evolution. But it's the hardest narrative to prove to a numbers-driven board.", fx: { buyIn: 10, adoption: 4, efficiency: 2, risk: -3, budget: 0 }, fb: "A genuine moment in the room. The Managing Partner says: 'This is what transformation should look like.' The CEO agrees. Then the CFO: 'Moving. Now show me the numbers.' You have them ‚Äî and the emotional foundation makes the data land harder." },
      ]},
  ],
};

const RANDOM_EVENTS = [
  { title: "Critical System Outage", icon: "üî•", desc: "Your primary AI platform goes down for 48 hours during a client deadline. Staff revert to manual processes and some ask: 'Why did we become dependent on this?'", fx: { buyIn: -5, adoption: -3, efficiency: -5, risk: 5, budget: 0 } },
  { title: "Industry Award Nomination", icon: "üèÜ", desc: "Your transformation programme is nominated for the Legal/Financial Innovation Award. Great press ‚Äî but now you're under a spotlight.", fx: { buyIn: 8, adoption: 3, efficiency: 0, risk: -2, budget: 0 } },
  { title: "Negative Press Coverage", icon: "üì∞", desc: "The FT publishes 'AI set to replace 40% of professional services jobs.' Staff anxiety spikes. Three people ask HR about redundancy terms.", fx: { buyIn: -7, adoption: -5, efficiency: -2, risk: 4, budget: 0 } },
  { title: "Breakthrough Use Case", icon: "üí°", desc: "A junior analyst builds an AI workflow that reduces a 3-day process to 4 hours. The client is ecstatic. It wasn't in your roadmap ‚Äî it was grassroots innovation.", fx: { buyIn: 6, adoption: 5, efficiency: 8, risk: 0, budget: 2 } },
  { title: "Security Audit Findings", icon: "üîí", desc: "External audit finds your AI tools are logging prompts that contain client names. Not a breach, but a governance gap that needs immediate remediation.", fx: { buyIn: -3, adoption: -2, efficiency: 0, risk: 7, budget: -3 } },
  { title: "Board Member Change", icon: "üîÑ", desc: "Your most supportive board sponsor retires. Their replacement is a former auditor who is 'AI-cautious' and wants to see 'proper controls before further investment.'", fx: { buyIn: -6, adoption: -2, efficiency: 0, risk: 4, budget: -2 } },
  { title: "Team Certification Success", icon: "üéì", desc: "Your AI champions all pass industry-recognised AI governance certifications. LinkedIn buzz follows.", fx: { buyIn: 5, adoption: 4, efficiency: 2, risk: -4, budget: 0 } },
  { title: "Client Demand Surge", icon: "üìà", desc: "Three major clients independently ask: 'What AI capabilities can you offer us?' Demand you didn't expect ‚Äî and aren't ready to productise.", fx: { buyIn: 8, adoption: 3, efficiency: 3, risk: 5, budget: 2 } },
];

const clamp = (v, min, max) => Math.max(min, Math.min(max, v));

const C = { bg: "#0b0e17", surface: "#131829", surfaceLight: "#1a2035", border: "#252d44", accent: "#4f8cff", accentGlow: "rgba(79,140,255,0.12)", green: "#34d399", red: "#f87171", amber: "#fbbf24", purple: "#a78bfa", text: "#e2e8f0", textDim: "#8892a8", textMuted: "#4a5568" };
const F = `'Segoe UI', system-ui, -apple-system, sans-serif`;

function MetricBar({ label, value, icon, inverse }) {
  const dv = inverse ? 100 - value : value;
  const bc = inverse ? (value > 70 ? C.red : value > 40 ? C.amber : C.green) : (dv > 60 ? C.green : dv > 35 ? C.amber : C.red);
  return (<div style={{ marginBottom: 10 }}>
    <div style={{ display: "flex", justifyContent: "space-between", marginBottom: 4, fontSize: 12 }}>
      <span style={{ color: C.textDim }}>{icon} {label}</span>
      <span style={{ color: bc, fontWeight: 700 }}>{dv}%</span>
    </div>
    <div style={{ height: 6, background: C.border, borderRadius: 3, overflow: "hidden" }}>
      <div style={{ height: "100%", width: `${dv}%`, background: bc, borderRadius: 3, transition: "width 0.8s ease, background 0.8s ease" }} />
    </div>
  </div>);
}

function EffectTags({ fx }) {
  return (<div style={{ display: "flex", gap: 5, flexWrap: "wrap" }}>
    {Object.entries(fx).filter(([, v]) => v !== 0).map(([k, v]) => {
      const good = k === "risk" ? v < 0 : v > 0;
      return (<span key={k} style={{ fontSize: 11, padding: "2px 7px", borderRadius: 4, background: good ? `${C.green}18` : `${C.red}18`, color: good ? C.green : C.red, fontWeight: 600 }}>
        {k === "buyIn" ? "Buy-In" : k === "risk" ? "Risk" : k.charAt(0).toUpperCase() + k.slice(1)} {v > 0 ? "+" : ""}{v}
      </span>);
    })}
  </div>);
}

function PasswordScreen({ onUnlock }) {
  const [pw, setPw] = useState(""); const [err, setErr] = useState(false); const [shake, setShake] = useState(false); const ref = useRef(null);
  useEffect(() => { ref.current?.focus(); }, []);
  const submit = () => { if (pw.toUpperCase() === PASSWORD) onUnlock(); else { setErr(true); setShake(true); setTimeout(() => setShake(false), 500); } };
  return (<div style={{ minHeight: "100vh", background: `linear-gradient(160deg, ${C.bg}, #111827, ${C.bg})`, display: "flex", alignItems: "center", justifyContent: "center", fontFamily: F }}>
    <style>{`@keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-8px)}75%{transform:translateX(8px)}}@keyframes fadeUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}`}</style>
    <div style={{ textAlign: "center", animation: shake ? "shake 0.4s ease" : "fadeUp 0.5s ease", padding: 40 }}>
      <div style={{ fontSize: 48, marginBottom: 12 }}>üß†</div>
      <h1 style={{ fontSize: 28, fontWeight: 700, color: C.text, margin: "0 0 4px" }}>AI Infusion Lab</h1>
      <p style={{ color: C.textDim, fontSize: 14, marginBottom: 32 }}>From Tools to Outcomes</p>
      <div style={{ display: "flex", gap: 8, justifyContent: "center" }}>
        <input ref={ref} type="password" placeholder="Access code" value={pw} onChange={e => { setPw(e.target.value); setErr(false); }} onKeyDown={e => e.key === "Enter" && submit()} style={{ padding: "12px 16px", background: C.surface, border: `1px solid ${err ? C.red : C.border}`, borderRadius: 8, color: C.text, fontSize: 14, fontFamily: F, outline: "none", width: 200, textAlign: "center", letterSpacing: 2 }} />
        <button onClick={submit} style={{ padding: "12px 20px", background: C.accent, color: "#fff", border: "none", borderRadius: 8, fontSize: 14, fontWeight: 600, cursor: "pointer", fontFamily: F }}>Enter</button>
      </div>
      {err && <p style={{ color: C.red, fontSize: 13, marginTop: 12 }}>Invalid access code</p>}
    </div>
  </div>);
}

function App() {
  const [screen, setScreen] = useState("setup");
  const [vertical, setVertical] = useState(null);
  const [size, setSize] = useState(null);
  const [selectedProducts, setSelectedProducts] = useState([]);
  const [setupStep, setSetupStep] = useState(0);
  const [phase, setPhase] = useState(0);
  const [scenarioIdx, setScenarioIdx] = useState(0);
  const [scores, setScores] = useState({ buyIn: 50, adoption: 20, efficiency: 30, risk: 50, budget: 80 });
  const [history, setHistory] = useState([]);
  const [feedback, setFeedback] = useState(null);
  const [randomEvent, setRandomEvent] = useState(null);
  const [usedEvents, setUsedEvents] = useState([]);
  const [hoverIdx, setHoverIdx] = useState(-1);
  const [showGuide, setShowGuide] = useState(false);
  const [guideMode, setGuideMode] = useState(false); // strategy guide toggle

  const scenarios = SCENARIOS[PHASES[phase]?.key] || [];
  const cs = scenarios[scenarioIdx];
  const totalS = Object.values(SCENARIOS).reduce((a, b) => a + b.length, 0);

  const apply = (fx) => setScores(s => ({ buyIn: clamp(s.buyIn + (fx.buyIn || 0), 0, 100), adoption: clamp(s.adoption + (fx.adoption || 0), 0, 100), efficiency: clamp(s.efficiency + (fx.efficiency || 0), 0, 100), risk: clamp(s.risk + (fx.risk || 0), 0, 100), budget: clamp(s.budget + (fx.budget || 0), 0, 100) }));

  const choose = (i) => {
    if (feedback || randomEvent) return;
    const o = cs.options[i];
    apply(o.fx);
    setHistory(h => [...h, { phase: PHASES[phase].name, scenario: cs.title, choiceIdx: i, choice: o.text.split('.')[0], fb: o.fb, guide: cs.guide }]);
    setFeedback({ text: o.fb, fx: o.fx, guide: cs.guide, choiceIdx: i });
    setShowGuide(false);
  };

  const advance = () => {
    if (scenarioIdx + 1 < scenarios.length) setScenarioIdx(i => i + 1);
    else if (phase + 1 < PHASES.length) { setPhase(p => p + 1); setScenarioIdx(0); }
    else setScreen("result");
    setShowGuide(false);
  };

  const cont = () => {
    setFeedback(null);
    if (Math.random() < 0.25 && usedEvents.length < RANDOM_EVENTS.length) {
      const avail = RANDOM_EVENTS.filter((_, i) => !usedEvents.includes(i));
      if (avail.length) {
        const ev = avail[Math.floor(Math.random() * avail.length)];
        setUsedEvents(u => [...u, RANDOM_EVENTS.indexOf(ev)]);
        setRandomEvent(ev); apply(ev.fx); return;
      }
    }
    advance();
  };

  const evCont = () => { setRandomEvent(null); advance(); };
  const toggle = (id) => setSelectedProducts(p => p.includes(id) ? p.filter(x => x !== id) : [...p, id]);

  const grade = () => {
    const avg = (scores.buyIn + scores.adoption + scores.efficiency + (100 - scores.risk) + scores.budget) / 5;
    return avg >= 55 ? { pass: true, label: "PASS", color: C.green, msg: "Transformation successful. You've built sustainable AI capability with a strong foundation for continued growth." } : { pass: false, label: "FAIL", color: C.red, msg: "Transformation fell short. Key areas need strategic recalibration before the next phase of investment." };
  };

  const reset = () => { setScreen("setup"); setSetupStep(0); setVertical(null); setSize(null); setSelectedProducts([]); setPhase(0); setScenarioIdx(0); setScores({ buyIn: 50, adoption: 20, efficiency: 30, risk: 50, budget: 80 }); setHistory([]); setFeedback(null); setRandomEvent(null); setUsedEvents([]); setGuideMode(false); };

  const Btn = ({ children, onClick, primary, disabled, style: s }) => (<button onClick={onClick} disabled={disabled} style={{ padding: "11px 24px", background: primary ? C.accent : "transparent", color: primary ? "#fff" : C.text, border: primary ? "none" : `1px solid ${C.border}`, borderRadius: 8, fontSize: 13, fontWeight: 600, cursor: disabled ? "not-allowed" : "pointer", fontFamily: F, opacity: disabled ? 0.4 : 1, transition: "all 0.2s", ...s }}>{children}</button>);

  if (false) return null; // password removed

  // ‚îÄ‚îÄ SETUP ‚îÄ‚îÄ
  if (screen === "setup") return (
    <div style={{ minHeight: "100vh", background: C.bg, fontFamily: F, color: C.text }}>
      <style>{`@keyframes fadeUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}`}</style>
      <div style={{ maxWidth: 800, margin: "0 auto", padding: "40px 20px", animation: "fadeUp 0.5s ease" }}>
        <div style={{ textAlign: "center", marginBottom: 40 }}>
          <div style={{ fontSize: 13, color: C.accent, fontWeight: 700, letterSpacing: 2.5, marginBottom: 8 }}>AI INFUSION LAB</div>
          <h1 style={{ fontSize: 30, fontWeight: 700, margin: "0 0 6px" }}>From Tools to Outcomes</h1>
          <p style={{ color: C.textDim, fontSize: 14, maxWidth: 500, margin: "0 auto" }}>You've been hired to infuse CoPilot, OpenAI & M365 into business services to drive operational excellence and productivity. 18 months. Every decision has real trade-offs.</p>
        </div>
        <div style={{ display: "flex", justifyContent: "center", gap: 8, marginBottom: 36 }}>
          {["Industry", "Size", "AI Stack"].map((s, i) => (
            <div key={i} style={{ display: "flex", alignItems: "center", gap: 8 }}>
              <div style={{ width: 26, height: 26, borderRadius: 13, background: i <= setupStep ? C.accent : C.surface, border: `2px solid ${i <= setupStep ? C.accent : C.border}`, display: "flex", alignItems: "center", justifyContent: "center", fontSize: 11, fontWeight: 700, color: i <= setupStep ? "#fff" : C.textDim }}>{i + 1}</div>
              <span style={{ fontSize: 13, color: i <= setupStep ? C.text : C.textDim }}>{s}</span>
              {i < 2 && <div style={{ width: 32, height: 1, background: C.border, margin: "0 4px" }} />}
            </div>
          ))}
        </div>

        {setupStep === 0 && (<div>
          <h2 style={{ fontSize: 19, fontWeight: 600, marginBottom: 18, textAlign: "center" }}>Select Your Industry</h2>
          <div style={{ display: "grid", gridTemplateColumns: "repeat(auto-fill, minmax(210px, 1fr))", gap: 10 }}>
            {VERTICALS.map(v => (<div key={v.id} onClick={() => setVertical(v)} style={{ background: vertical?.id === v.id ? C.accentGlow : C.surface, border: `1px solid ${vertical?.id === v.id ? C.accent : C.border}`, borderRadius: 10, padding: 18, cursor: "pointer", textAlign: "center", transition: "all 0.2s" }}><div style={{ fontSize: 30, marginBottom: 6 }}>{v.icon}</div><div style={{ fontWeight: 600, fontSize: 14 }}>{v.name}</div></div>))}
          </div>
          <div style={{ textAlign: "center", marginTop: 28 }}><Btn primary disabled={!vertical} onClick={() => setSetupStep(1)}>Continue ‚Üí</Btn></div>
        </div>)}
        {setupStep === 1 && (<div>
          <h2 style={{ fontSize: 19, fontWeight: 600, marginBottom: 6, textAlign: "center" }}>{vertical.icon} {vertical.name}</h2>
          <p style={{ textAlign: "center", color: C.textDim, marginBottom: 22, fontSize: 13 }}>Organisation size affects complexity, budget, and stakeholder dynamics.</p>
          <div style={{ display: "grid", gridTemplateColumns: "repeat(auto-fill, minmax(190px, 1fr))", gap: 10, maxWidth: 640, margin: "0 auto" }}>
            {vertical.sizes.map(s => (<div key={s} onClick={() => setSize(s)} style={{ background: size === s ? C.accentGlow : C.surface, border: `1px solid ${size === s ? C.accent : C.border}`, borderRadius: 10, padding: 22, cursor: "pointer", textAlign: "center", transition: "all 0.2s" }}><div style={{ fontWeight: 600, fontSize: 14 }}>{s}</div></div>))}
          </div>
          <div style={{ display: "flex", justifyContent: "center", gap: 10, marginTop: 28 }}><Btn onClick={() => setSetupStep(0)}>‚Üê Back</Btn><Btn primary disabled={!size} onClick={() => setSetupStep(2)}>Continue ‚Üí</Btn></div>
        </div>)}
        {setupStep === 2 && (<div>
          <h2 style={{ fontSize: 19, fontWeight: 600, marginBottom: 6, textAlign: "center" }}>Build Your AI Stack</h2>
          <p style={{ textAlign: "center", color: C.textDim, marginBottom: 22, fontSize: 13 }}>Select 2‚Äì4 products. Each adds capability but costs budget.</p>
          <div style={{ display: "grid", gridTemplateColumns: "repeat(auto-fill, minmax(220px, 1fr))", gap: 10 }}>
            {AI_PRODUCTS.map(p => (<div key={p.id} onClick={() => toggle(p.id)} style={{ background: selectedProducts.includes(p.id) ? C.accentGlow : C.surface, border: `1px solid ${selectedProducts.includes(p.id) ? C.accent : C.border}`, borderRadius: 10, padding: 14, cursor: "pointer", transition: "all 0.2s" }}><div style={{ display: "flex", alignItems: "center", gap: 10 }}><span style={{ fontSize: 22 }}>{p.icon}</span><div><div style={{ fontWeight: 600, fontSize: 13 }}>{p.name}</div><div style={{ fontSize: 11, color: C.textDim }}>~${p.cost}k/month</div></div></div></div>))}
          </div>
          {selectedProducts.length > 0 && <p style={{ textAlign: "center", color: C.textDim, marginTop: 14, fontSize: 12 }}>{selectedProducts.length} selected ‚Äî est. ${selectedProducts.reduce((a, id) => a + (AI_PRODUCTS.find(p => p.id === id)?.cost || 0), 0)}k/month</p>}
          <div style={{ display: "flex", justifyContent: "center", gap: 10, marginTop: 24, flexWrap: "wrap" }}>
            <Btn onClick={() => setSetupStep(1)}>‚Üê Back</Btn>
            <Btn primary disabled={selectedProducts.length < 2 || selectedProducts.length > 4} onClick={() => { const cp = selectedProducts.reduce((a, id) => a + (AI_PRODUCTS.find(p => p.id === id)?.cost || 0), 0) / 10; setScores(s => ({ ...s, budget: clamp(s.budget - cp, 0, 100) })); setScreen("game"); }}>Begin Transformation ‚Üí</Btn>
          </div>
          <div style={{ textAlign: "center", marginTop: 20 }}>
            <label style={{ fontSize: 12, color: C.textDim, cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center", gap: 6 }}>
              <input type="checkbox" checked={guideMode} onChange={e => setGuideMode(e.target.checked)} style={{ accentColor: C.accent }} />
              Enable Strategy Guide (shows playbook recommendations after each decision)
            </label>
          </div>
        </div>)}
      </div>
    </div>
  );

  // ‚îÄ‚îÄ RESULT ‚îÄ‚îÄ
  if (screen === "result") {
    const g = grade();
    const matchCount = history.filter(h => h.guide && h.choiceIdx === ["A","B","C"].indexOf(h.guide.rec[0])).length;
    return (
      <div style={{ minHeight: "100vh", background: C.bg, fontFamily: F, color: C.text }}>
        <style>{`@keyframes fadeUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}`}</style>
        <div style={{ maxWidth: 720, margin: "0 auto", padding: "40px 20px", animation: "fadeUp 0.5s ease" }}>
          <div style={{ textAlign: "center", marginBottom: 36 }}>
            <div style={{ fontSize: 13, color: C.accent, fontWeight: 700, letterSpacing: 2.5, marginBottom: 8 }}>AI INFUSION LAB</div>
            <h1 style={{ fontSize: 26, fontWeight: 700, margin: "0 0 6px" }}>Transformation Complete</h1>
            <p style={{ color: C.textDim, fontSize: 13 }}>{vertical?.icon} {vertical?.name} ‚Äî {size} ‚Äî 18-month programme</p>
          </div>

          <div style={{ textAlign: "center", padding: 36, background: `${g.color}0a`, border: `2px solid ${g.color}30`, borderRadius: 14, marginBottom: 24 }}>
            <div style={{ fontSize: 52, fontWeight: 800, color: g.color, letterSpacing: 4 }}>{g.label}</div>
            <p style={{ color: C.textDim, marginTop: 8, fontSize: 14 }}>{g.msg}</p>
          </div>

          <div style={{ background: C.surface, border: `1px solid ${C.border}`, borderRadius: 12, padding: 22, marginBottom: 20 }}>
            <h3 style={{ fontSize: 15, fontWeight: 600, marginTop: 0, marginBottom: 14 }}>Final Scorecard</h3>
            <MetricBar label="Stakeholder Buy-In" value={scores.buyIn} icon="ü§ù" />
            <MetricBar label="Adoption Rate" value={scores.adoption} icon="üìà" />
            <MetricBar label="Operational Efficiency" value={scores.efficiency} icon="‚ö°" />
            <MetricBar label="Risk Exposure" value={scores.risk} icon="‚ö†Ô∏è" inverse />
            <MetricBar label="Budget Remaining" value={scores.budget} icon="üí∞" />
          </div>

          {/* Companion Scorecard */}
          <div style={{ background: C.surface, border: `1px solid ${C.border}`, borderRadius: 12, padding: 22, marginBottom: 20 }}>
            <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: 14 }}>
              <h3 style={{ fontSize: 15, fontWeight: 600, margin: 0 }}>Decision Scorecard vs. Strategy Playbook</h3>
              <span style={{ fontSize: 12, padding: "3px 10px", borderRadius: 6, background: `${C.accent}20`, color: C.accent, fontWeight: 700 }}>{matchCount}/{history.length} aligned</span>
            </div>
            {history.map((h, i) => {
              const recLetter = h.guide?.rec?.[0];
              const myLetter = String.fromCharCode(65 + h.choiceIdx);
              const aligned = myLetter === recLetter;
              return (
                <div key={i} style={{ padding: "10px 0", borderBottom: i < history.length - 1 ? `1px solid ${C.border}` : "none" }}>
                  <div style={{ display: "flex", justifyContent: "space-between", alignItems: "flex-start", gap: 8 }}>
                    <div style={{ flex: 1 }}>
                      <div style={{ fontSize: 10, color: C.accent, fontWeight: 700, letterSpacing: 1 }}>{h.phase}</div>
                      <div style={{ fontSize: 13, fontWeight: 600, marginTop: 2 }}>{h.scenario}</div>
                      <div style={{ fontSize: 12, color: C.textDim, marginTop: 3 }}>You chose: <span style={{ color: C.text }}>{myLetter}</span> ‚Äî {h.choice}</div>
                      {h.guide && <div style={{ fontSize: 12, color: C.textDim, marginTop: 2 }}>Playbook recommends: <span style={{ color: C.purple, fontWeight: 600 }}>{h.guide.rec}</span></div>}
                    </div>
                    <div style={{ width: 28, height: 28, borderRadius: 14, flexShrink: 0, display: "flex", alignItems: "center", justifyContent: "center", fontSize: 14, background: aligned ? `${C.green}20` : `${C.amber}20`, marginTop: 4 }}>
                      {aligned ? "‚úì" : "‚Üî"}
                    </div>
                  </div>
                  {h.guide && !aligned && <div style={{ fontSize: 11, color: C.textDim, marginTop: 6, padding: "6px 10px", background: C.surfaceLight, borderRadius: 6, lineHeight: 1.5 }}>{h.guide.analysis}</div>}
                </div>
              );
            })}
          </div>

          <div style={{ textAlign: "center", marginTop: 28 }}><Btn primary onClick={reset}>Play Again</Btn></div>
          <p style={{ textAlign: "center", color: C.textMuted, fontSize: 10, marginTop: 28 }}>AI Infusion Lab | Infusing AI into Business Services for Operational Excellence & Productivity</p>
        </div>
      </div>
    );
  }

  // ‚îÄ‚îÄ GAME ‚îÄ‚îÄ
  const pd = PHASES[phase];
  const prog = (history.length / totalS) * 100;

  return (
    <div style={{ minHeight: "100vh", background: C.bg, fontFamily: F, color: C.text }}>
      <style>{`@keyframes fadeUp{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}`}</style>
      <div style={{ background: C.surface, borderBottom: `1px solid ${C.border}`, padding: "10px 20px", position: "sticky", top: 0, zIndex: 10 }}>
        <div style={{ maxWidth: 940, margin: "0 auto", display: "flex", justifyContent: "space-between", alignItems: "center", flexWrap: "wrap", gap: 8 }}>
          <span style={{ fontSize: 12, color: C.accent, fontWeight: 700, letterSpacing: 1.5 }}>AI INFUSION LAB</span>
          <div style={{ display: "flex", alignItems: "center", gap: 12 }}>
            {guideMode && <span style={{ fontSize: 10, padding: "3px 8px", borderRadius: 4, background: `${C.purple}20`, color: C.purple, fontWeight: 600 }}>STRATEGY GUIDE ON</span>}
            <span style={{ fontSize: 12, color: C.textDim }}>{vertical?.icon} {size}</span>
            <span style={{ fontSize: 11, fontWeight: 700, padding: "3px 10px", background: `${pd.color}20`, color: pd.color, borderRadius: 5 }}>{pd.name} ¬∑ {pd.months}</span>
          </div>
        </div>
      </div>
      <div style={{ height: 3, background: C.border }}><div style={{ height: "100%", width: `${prog}%`, background: `linear-gradient(90deg, ${C.accent}, ${pd.color})`, transition: "width 0.6s ease" }} /></div>

      <div style={{ maxWidth: 940, margin: "0 auto", padding: "20px 20px", display: "flex", gap: 20 }}>
        <div style={{ flex: "1 1 500px", minWidth: 0, animation: "fadeUp 0.35s ease" }}>
          <div style={{ display: "flex", gap: 5, marginBottom: 20 }}>
            {PHASES.map((p, i) => <div key={i} style={{ flex: 1, height: 4, borderRadius: 2, background: i < phase ? C.green : i === phase ? pd.color : C.border, transition: "all 0.4s" }} />)}
          </div>

          {randomEvent && (<div style={{ background: `${C.amber}08`, border: `1px solid ${C.amber}30`, borderRadius: 12, padding: 22, marginBottom: 20 }}>
            <div style={{ display: "flex", alignItems: "center", gap: 10, marginBottom: 10 }}>
              <span style={{ fontSize: 26 }}>{randomEvent.icon}</span>
              <div><div style={{ fontSize: 10, color: C.amber, fontWeight: 700, letterSpacing: 1.2 }}>UNEXPECTED EVENT</div><h3 style={{ fontSize: 17, fontWeight: 700, margin: 0 }}>{randomEvent.title}</h3></div>
            </div>
            <p style={{ color: C.textDim, fontSize: 14, lineHeight: 1.6, margin: "0 0 14px" }}>{randomEvent.desc}</p>
            <EffectTags fx={randomEvent.fx} />
            <div style={{ marginTop: 14 }}><Btn primary onClick={evCont}>Acknowledge & Continue ‚Üí</Btn></div>
          </div>)}

          {feedback && !randomEvent && (<div style={{ background: C.accentGlow, border: `1px solid ${C.accent}40`, borderRadius: 12, padding: 22, marginBottom: 20 }}>
            <div style={{ fontSize: 10, color: C.accent, fontWeight: 700, letterSpacing: 1.2, marginBottom: 8 }}>OUTCOME</div>
            <p style={{ fontSize: 14, lineHeight: 1.7, margin: "0 0 14px", color: C.text }}>{feedback.text}</p>
            <EffectTags fx={feedback.fx} />

            {guideMode && feedback.guide && (<div style={{ marginTop: 16, padding: 14, background: `${C.purple}08`, border: `1px solid ${C.purple}25`, borderRadius: 8 }}>
              <div style={{ fontSize: 10, color: C.purple, fontWeight: 700, letterSpacing: 1.2, marginBottom: 6 }}>üìò STRATEGY PLAYBOOK</div>
              <div style={{ fontSize: 12, color: C.textDim, marginBottom: 4 }}>Recommended: <span style={{ color: C.purple, fontWeight: 700 }}>Option {feedback.guide.rec}</span>
                {feedback.choiceIdx === ["A","B","C"].indexOf(feedback.guide.rec[0]) && <span style={{ color: C.green, marginLeft: 8 }}>‚úì You chose the playbook pick</span>}
              </div>
              <p style={{ fontSize: 12, color: C.textDim, lineHeight: 1.6, margin: 0 }}>{feedback.guide.analysis}</p>
            </div>)}

            <div style={{ marginTop: 14 }}><Btn primary onClick={cont}>Continue ‚Üí</Btn></div>
          </div>)}

          {!feedback && !randomEvent && cs && (<div>
            <div style={{ background: C.surface, border: `1px solid ${C.border}`, borderRadius: 12, padding: 22, marginBottom: 16 }}>
              <div style={{ fontSize: 10, color: pd.color, fontWeight: 700, letterSpacing: 1.2, marginBottom: 6 }}>{pd.name.toUpperCase()} ‚Äî DECISION {scenarioIdx + 1}/{scenarios.length}</div>
              <h2 style={{ fontSize: 20, fontWeight: 700, margin: "0 0 10px" }}>{cs.title}</h2>
              <p style={{ color: C.textDim, fontSize: 14, lineHeight: 1.65, margin: 0 }}>{cs.desc}</p>
            </div>
            <div style={{ display: "flex", flexDirection: "column", gap: 8 }}>
              {cs.options.map((o, i) => {
                const ac = [C.accent, C.amber, C.purple][i];
                return (<div key={i} onClick={() => choose(i)} onMouseEnter={() => setHoverIdx(i)} onMouseLeave={() => setHoverIdx(-1)}
                  style={{ background: hoverIdx === i ? C.surfaceLight : C.surface, border: `1px solid ${C.border}`, borderLeft: `3px solid ${ac}`, borderRadius: 10, padding: "14px 18px", cursor: "pointer", transition: "all 0.15s" }}>
                  <div style={{ display: "flex", alignItems: "flex-start", gap: 10 }}>
                    <div style={{ width: 22, height: 22, borderRadius: 11, flexShrink: 0, marginTop: 1, background: `${ac}20`, color: ac, display: "flex", alignItems: "center", justifyContent: "center", fontSize: 11, fontWeight: 700 }}>{String.fromCharCode(65 + i)}</div>
                    <span style={{ fontSize: 13, lineHeight: 1.55 }}>{o.text}</span>
                  </div>
                </div>);
              })}
            </div>
          </div>)}
        </div>

        <div style={{ flex: "0 0 250px", minWidth: 250 }}>
          <div style={{ background: C.surface, border: `1px solid ${C.border}`, borderRadius: 12, padding: 18, position: "sticky", top: 72 }}>
            <h3 style={{ fontSize: 12, fontWeight: 700, marginTop: 0, marginBottom: 14, color: C.textDim, letterSpacing: 1.2 }}>DASHBOARD</h3>
            <MetricBar label="Stakeholder Buy-In" value={scores.buyIn} icon="ü§ù" />
            <MetricBar label="Adoption Rate" value={scores.adoption} icon="üìà" />
            <MetricBar label="Operational Efficiency" value={scores.efficiency} icon="‚ö°" />
            <MetricBar label="Risk Exposure" value={scores.risk} icon="‚ö†Ô∏è" inverse />
            <MetricBar label="Budget Remaining" value={scores.budget} icon="üí∞" />
            <div style={{ marginTop: 16, paddingTop: 14, borderTop: `1px solid ${C.border}` }}>
              <div style={{ fontSize: 11, color: C.textDim, marginBottom: 6 }}>AI Stack</div>
              <div style={{ display: "flex", flexWrap: "wrap", gap: 4 }}>
                {selectedProducts.map(id => { const p = AI_PRODUCTS.find(x => x.id === id); return p ? <span key={id} style={{ fontSize: 10, padding: "2px 7px", borderRadius: 4, background: C.surfaceLight, color: C.textDim }}>{p.icon} {p.name.split(" ")[0]}</span> : null; })}
              </div>
            </div>
            <div style={{ marginTop: 14, paddingTop: 14, borderTop: `1px solid ${C.border}` }}>
              <div style={{ fontSize: 11, color: C.textDim, marginBottom: 6 }}>Timeline</div>
              {PHASES.map((p, i) => (<div key={i} style={{ display: "flex", alignItems: "center", gap: 7, marginBottom: 4 }}>
                <div style={{ width: 7, height: 7, borderRadius: 4, background: i < phase ? C.green : i === phase ? p.color : C.border }} />
                <span style={{ fontSize: 10, color: i <= phase ? C.text : C.textMuted, fontWeight: i === phase ? 600 : 400 }}>{p.name}</span>
              </div>))}
            </div>
            {guideMode && <div style={{ marginTop: 14, paddingTop: 14, borderTop: `1px solid ${C.border}` }}>
              <div style={{ fontSize: 10, color: C.purple, fontWeight: 600 }}>üìò Strategy Guide active ‚Äî playbook analysis shown after each decision</div>
            </div>}
          </div>
        </div>
      </div>
    </div>
  );
}

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(React.createElement(App));
</script>
</body>
</html>
